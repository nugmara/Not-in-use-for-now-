---


const baseUrl = "https://rickandmortyapi.com/api/character";
let allCharacters = [];
let characterCount = 0;
const maxCharacters = 5;

async function fetchAllCharacters(url) {
  try {
    const response = await fetch(url);
    const data = await response.json();
    
    if (response.ok) {
      allCharacters = allCharacters.concat(data.results);
      characterCount += data.results.length;

      if (characterCount < maxCharacters && data.info.next) {
        // If there's a next page and we haven't reached the limit, recursively fetch the next page
        await fetchAllCharacters(data.info.next);
      } else {
        // Either we reached the limit or there are no more characters to fetch
        const charactersJSON = JSON.stringify(allCharacters.slice(0, maxCharacters));
        console.log("Characters fetched:", charactersJSON);
      }
    } else {
      console.error("Error fetching characters:", data.error);
    }
  } catch (error) {
    console.error("An error occurred:", error);
  }
}

fetchAllCharacters(baseUrl);

---

<div> 
  {allCharacters.map((character => <h2>{character.name}</h2>))}
</div>
